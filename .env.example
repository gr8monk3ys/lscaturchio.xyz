# ============================================
# REQUIRED - Core Services
# ============================================

# OpenAI API Key (REQUIRED for AI chat, search, and summarization)
# Get from: https://platform.openai.com/api-keys
# Used by: /api/chat, /api/search, /api/related-posts, /api/summarize
OPENAI_API_KEY=your_openai_api_key_here

# Supabase Database URL (REQUIRED for newsletter and embeddings)
# Get from: Supabase Dashboard > Project Settings > API > Project URL
# Used by: Newsletter system, vector embeddings storage
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co

# Supabase Service Role Key (REQUIRED - Server-side only, keep secret!)
# Get from: Supabase Dashboard > Project Settings > API > service_role key
# Used by: Server-side database operations (newsletter, embeddings)
SUPABASE_SERVICE_KEY=your_supabase_service_role_key_here

# ============================================
# OPTIONAL - Enhanced Features
# ============================================

# GitHub Personal Access Token (OPTIONAL - for live contribution graph)
# Get from: https://github.com/settings/tokens (needs 'read:user' scope)
# Used by: /api/github/contributions
# If not set: Falls back to mock data
GITHUB_TOKEN=your_github_personal_access_token

# Custom Site URL (OPTIONAL - defaults to localhost in dev)
# Used for: Canonical URLs, Open Graph, sitemap generation
# Production example: https://lscaturchio.xyz
NEXT_PUBLIC_SITE_URL=http://localhost:3000

# Resend API Key (OPTIONAL - for contact form email sending)
# Get from: https://resend.com/api-keys
# Used by: /api/contact
# If not set: Contact form logs to console instead of sending email
# NOTE: You must verify your domain in Resend dashboard to send emails
RESEND_API_KEY=your_resend_api_key_here

# Contact Form Email Recipients (OPTIONAL - defaults shown)
# Used by: /api/contact
CONTACT_EMAIL=lorenzo@lscaturchio.xyz
CONTACT_FROM_EMAIL=contact@lscaturchio.xyz

# Newsletter From Email (OPTIONAL - for welcome emails)
# Used by: Newsletter welcome email
NEWSLETTER_FROM_EMAIL=newsletter@lscaturchio.xyz

# Embedding Search Threshold (OPTIONAL - default: 0.5)
# Range: 0-1, higher = stricter matching (fewer but more relevant results)
# Used by: AI chat and search for finding similar blog content
EMBEDDING_MATCH_THRESHOLD=0.5

# Analytics API Key (OPTIONAL - for protected analytics endpoints)
# Used by: Future analytics endpoints if you want to protect them
# Leave empty if not needed
ANALYTICS_API_KEY=your_analytics_api_key

# ============================================
# EXTERNAL SERVICES - Configure in Platform
# ============================================

# Google AdSense Publisher ID (OPTIONAL - defaults to existing ID)
# Get from: https://www.google.com/adsense
# If not set: Falls back to default publisher ID
NEXT_PUBLIC_ADSENSE_CLIENT_ID=ca-pub-4505962980988232
# Update AdSense slot IDs in: src/components/blog/BlogLayout.tsx (lines 224, 233, 240, 250)

# Google Search Console Verification
# Add verification code in: src/app/metadata.ts (line 49)
# Get from: https://search.google.com/search-console

# Giscus Comments (GitHub Discussions)
# Configure in: src/components/blog/giscus-comments.tsx
# Setup guide: See GISCUS_SETUP.md
# Requires: Enable GitHub Discussions on your repo

# ============================================
# DEVELOPMENT ONLY
# ============================================

# Node Environment (auto-set by Next.js)
# NODE_ENV=development

# ============================================
# NOTES
# ============================================

# Rate Limiting:
# - All API routes are rate-limited
# - By default uses in-memory storage (resets on server restart)
# - For production: Set Upstash variables below for persistent Redis-based limiting

# Upstash Redis (OPTIONAL - for persistent rate limiting across deploys)
# Get from: https://console.upstash.com > Create Database > REST API
# If not set: Falls back to in-memory rate limiting
UPSTASH_REDIS_REST_URL=https://your-region.upstash.io
UPSTASH_REDIS_REST_TOKEN=your_upstash_token_here

# Newsletter Database:
# - Requires running migration: supabase/migrations/001_create_newsletter.sql
# - Table: newsletter_subscribers
# - RPC function: count_active_subscribers

# Embeddings:
# - After adding blogs, run: npm run generate-embeddings
# - Stores in Supabase 'embeddings' table with vector search
# - Uses OpenAI text-embedding-ada-002 model

# PWA Icons:
# - Already generated in /public directory
# - icon-192x192.png, icon-512x512.png, apple-touch-icon.png, favicon.ico

# Vote Deduplication:
# - Server-side tracking prevents vote manipulation
# - Uses IP hash for privacy-preserving deduplication
# - Run migration: supabase/migrations/20250112_add_vote_deduplication.sql
# - Set a custom salt for production (optional but recommended)
VOTER_HASH_SALT=your-custom-voter-salt-here
# Set to 'true' to disable vote deduplication (for testing)
# DISABLE_VOTE_DEDUPLICATION=true

# Sentry Error Tracking (OPTIONAL - for production error monitoring)
# Get DSN from: https://sentry.io > Project Settings > Client Keys (DSN)
# If not set: Error tracking is disabled
NEXT_PUBLIC_SENTRY_DSN=https://your-key@sentry.io/your-project-id
SENTRY_ORG=your-sentry-org
SENTRY_PROJECT=your-sentry-project
# Auth token for source map uploads (optional, from Sentry > Settings > Auth Tokens)
SENTRY_AUTH_TOKEN=your-sentry-auth-token

# Security:
# - Never commit .env.local or .env files to git
# - Use different keys for development/production
# - Rotate keys if accidentally exposed